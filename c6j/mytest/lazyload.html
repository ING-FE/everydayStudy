<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			img {
            display: block;
            margin-bottom: 50px;
            width: 400px;
            height: 400px;
        }
		</style>
	</head>
	<body>
	<img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww1.sinaimg.cn/large/006y8mN6gw1fa7kaed2hpj30sg0l9q54.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww1.sinaimg.cn/large/006y8mN6gw1fa7kaed2hpj30sg0l9q54.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww1.sinaimg.cn/large/006y8mN6gw1fa7kaed2hpj30sg0l9q54.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
    <img src="img/default.jpg" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">

<script>
	var imgs = document.getElementsByTagName("img");
	var mylength = imgs.length;
	var curnum = 0;
	//lazyload();
	var scrollnum = 0;
//	window.onscroll =  function(){
////		lazyload();
//		throttle(500,lazyload);
//		//throttle1(lazyload,500);
//	};
	window.onscroll = throttle2(lazyload,500,1000);
	
	function lazyload(){
		console.log("scroll执行了");
		var sheight = document.documentElement.clientHeight;
		var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;
		for(var i = curnum;i<mylength;i++){
			if(imgs[i].offsetTop<sheight+scrollTop){
				if(imgs[i].getAttribute("src") =="img/default.jpg"){
					imgs[i].src = imgs[i].getAttribute("data-src");
				}
				curnum=i+1;
				
			}
		}
	}
    function throttle(method,context){
           clearTimeout(method.timeout);
           method.timeout = setTimeout(function(){
           	  method.call(context);
           },500);
        }
    
    function throttle1(method,delay){
    	var timer = null;
    	return function(){
    		var context = this,args = arguments;
    		clearTimeout(timer);
    		timer = setTimeout(function(){
    			method.apply(context,args);
    		},delay);
    	}
    }
    function throttle2(method, delay, time) {
	    var timeout,startTime = new Date();
	    return function() {
	        var context = this,
	            args = arguments,
	            curTime = new Date();
	        clearTimeout(timeout);
	        // 如果达到了规定的触发时间间隔，触发 handler
	        if (curTime - startTime >= time) {
	            method.apply(context, args);
	            startTime = curTime;
	            // 没达到触发间隔，重新设定定时器
	        } else {
	            timeout = setTimeout(method, delay);
	        }
	    };
  }
function throttle(delay, methon){
	  var last = 0;
	  return function(){
	    var curr = +new Date();
	    if (curr - last > delay){
		      methon.apply(this, arguments)
		      last = curr ;
	    }
	  }
}
</script>
	</body>
	
</html>
